# HmDX 很萌下载器

HLS/m3u8 Downloader X (HmDX) 是一款M3U8网络视频下载工具。

![HmDX preview](https://thumbs2.imgbox.com/5b/3a/3N2Zjio6_t.png)


# 软件功能

- 支持多线程下载HLS切片。

- 支持HLS直播录制。

- 支持下载自动纠错。支持2-Pass自动校验。

- 支持使用 FFmpeg 软件进行MP4、TS格式封装。支持RAW输出。

- 支持自定义附加选项。

- 批量任务管理和启动。

- 自定义皮肤。

- 社会主义宣传。


# 系统要求

适用于Windows 7及以上操作系统。

您需要自主携带 ffmpeg.exe 才能够使用MP4、TS格式封装功能。


# 更新日志

**5.7.6 (2024/07/08)**

1.支持通过将"AutoRestart"附加选项的值设置为"-1"，使下载器在达到错误计数上限时自动退出，而非等待并重试。在使用批量任务控制器的场景下可以保证任务队列的正常执行。

---

**5.7.5 (2024/06/07)**

1.增加"NoProxy"附加选项，指示下载器不使用系统默认代理。

2.移除了一些过时的内置插件。

3.移除了一些过时的社会主义宣传标语。

---

**5.7.4 (2023/05/11)**

1.优化重定向链接嵌套函数调用机制。

---

**5.7.2 (2023/05/10)**

1.解决爱上电视传媒CDN升级后，M3U8链接无法正常下载的问题。

2.修复了"AutoSelect"附加选项的大小写区分问题。

---

**5.7.0 (2022/11/12)**

1.直播录制模式下，标题栏采用计时器展示进度。

2.增加"LiveOverride"附加选项，可在特殊需求场景下强制改变直播复选框的使能状态。

---

**5.6.6 (2022/10/23)**

1.修复输入采用纯IPv6地址的M3U8链接时，无法进行下载的问题。

---

**5.6.5 (2021/11/19)**

1.下载使用AES-128标准加密的视频时，若从服务器获取的密钥长度大于16字节，则自动提取密钥的有效部分。

---

**5.6.4 (2021/10/12)**

1.优化了下载器在Windows 11操作系统中的启动速度。

2.更新内置的FFmpeg程序下载链接。

---

**5.6.3 (2021/08/18)**

1.修复腾讯视频网站无法使用腾讯云格式TS链接自动生成M3U8链接的问题。

2.调整了一些社会主义宣传标语。

---

**5.6.2 (2021/07/07)**

1.修复了在任务启动并使能2-Pass校验后，再使能直播选项，可能会导致2-Pass校验选项失效且无法再次通过GUI使能的问题。

2.增加了一项隐藏功能。

---

**5.6.0 (2021/02/26)**

1.增加了"Key64"和"IV64"附加选项，以支持使用Base64文本格式手动指定加密视频流的密钥和IV。"Key64"可缩写为"K64"，"IV64"可缩写为"I64"。使用示例："Key64>rtVtowzDftkD+6u3LxMZBA=="

2.增加了SSL3.0加密协议的支持，以解决一些视频网站和操作系统的HTTPS相关兼容性问题。

3.更新央视频4K投屏算法。

4.移除了一些内置皮肤以减小程序体积。

---

**5.5.9 (2021/01/16)**

本次更新由开发者 *liuxiangBIT* 提交。

1.增加了针对爱奇艺视频网站M3U8链接优化的EntireTS附加选项。通过使能EntireTS选项，可直接下载爱奇艺视频网站完整的TS切片，以避免小概率出现的服务器错误导致花屏的问题。使能此附加选项时，因内存占用较大，默认下载线程数为2线程，可通过设置Threads选项指定下载线程数。

2.设置线程数时，可使用简化的参数名称"Th"或"Thread"。

---

**5.5.5 (2020/11/22)**

1.增加了一项隐藏功能。

2.优化了一项隐藏功能。

3.修复了一项无法使用的隐藏功能。

---

**5.5.4 (2020/11/20)**

1.更新内置的FFmpeg程序下载链接。

2.优化使用TS封装格式输出文件的体积。

3.新增切片JSON链接分析程序。当切片链接返回数据为JSON格式嵌套的HTTP链接时，可手动使能"ParseJSON"附加选项以下载被嵌套的数据。

---

**5.5.3 (2020/10/10)**

1.主界面新增支持在链接栏中粘贴爱奇艺视频网站amp4链接，一行一个。程序将自动下载并合并音频切片。

2.批量面板新增支持使用TXT文本文件批量导入附加选项。TXT的第一行内容为">"，随后一行一个附加选项字符串，从上到下对应列表中的每项任务。

3.内置央视频插件新增支持快速下载功能。填入任意带有时间戳的央视频TS切片链接，并使能附加选项"YSPL>500"，其中500为需要下载的切片总数量，默认值为1000，可实现快速下载所填链接时间段的电视节目内容。

4.直播录制功能新增支持模糊匹配切片文件名，以解决一些视频网站，例如央视频，录制回跳的问题。使能附加选项"LooseMatch"以生效。

5.增加了一些社会主义宣传标语。

---

**5.5.0 (2020/07/10)**

1.新增视频快速预览功能，可双击图标以调用本地播放器播放正在下载中的视频。

2.新增视频信息快速检索功能，可双击图标以显示视频基本信息。该功能依赖FFmpeg组件。

3.批量面板新增任务移动功能，可顶置或底置选中的任务。

---

**5.4.9 (2020/07/07)**

1.修复保存的默认附加选项在启动时无法正确加载的问题。

2.修复AppendQuery参数无法应用到大师播放列表的问题。

---

**5.4.7 (2020/06/28)**

1.新增支持应用M3U8链接的质询字符串到各切片链接。针对于不包含质询字符串(即"?")的切片链接，请使能"AppendQuery"附加选项。例如，下载一些LINE TV网站的视频时，您将需要使能该选项。

2.新增支持强制顶置主程序窗口。请添加注册表项："HKCU\Software\HmDX\TopMost" (值："1") 以使能强制顶置功能。(类型：REG_SZ)

3.移除了已过时的DeYA插件的支持。

---

**5.4.5 (2020/05/31)**

本次更新针对直播录制场景进行了数项优化。

1.新增"LiveAPI"附加选项。类型：布尔值。直播场景应用此参数后，将从外部刷新直播列表的获取链接。示例用法：填写API的URL后，应用"LiveAPI>True"参数。示例场景：使用GetVideo软件作为直播列表刷新的API，长时间录制央视频直播频道。

2.增加"LiveInterval"附加选项。类型：整数，单位：毫秒，默认值：2000。直播场景应用此参数后，将设定最小的m3u8列表的刷新间隔，防止下载速度过快导致服务器列表未能及时更新从而造成录制重复数据的问题。示例用法："LiveInterval>5000"。

3.录制央视频投屏版CCTV-4K频道时自动更新wsSecret。

4.优化直播切片刷新时的匹配策略。

5.日志新增记录直播中断次数。

6.修复写入本地视频缓存失败后，程序不再继续工作的问题。

7.修复了使用"Timeout"附加选项无法被正确应用的问题。

---

**5.4.3 (2020/04/29)**

1.修复自更新项目框架后，对EXT-X-BYTERANGE标签的支持失效的问题。

---

**5.4.2 (2020/04/27)**

1.修复在任务进行过程中，关闭窗口的确认提示框无论选是与否，都会结束任务的问题。

---

**5.4.1 (2020/04/09)**

1.批量面板支持命令行导入文本文档后自动启动队列。使用方法：在"Batch"参数最后加"?Start"。例如："Batch>D:\myQueue.txt?D:\queue2.txt?Start"。注意：您在调用启动命令之前，应该自行完成所有链接参数及注册表的配置。

2.现在您可以在附加选项中使用"!"符号简化表达去使能。例如："AutoClean>False"可以简化为"!AutoClean"。

3.调整"KeepAlive"参数的默认值为使能。

---

**5.4.0 (2020/04/07)**

本次更新针对流程化下载进行了数项优化。

1.现在您可以在批量面板导入每一行具有如下格式的文本文档："任务名<--->链接"。例如："流浪地球<--->http://some.server/LiuLangDiQiu.m3u8"。

2.现在您可以使用"StartErrorExit>True"参数控制任务启动检测到链接无效后自动退出。使用"ErrorExit>True"在您的任务过程中失败次数达到上限时将自动退出。

3.支持使用命令行直接打开批量控制面板并向批量面板添加文本文件。方法为"HmDX.exe Batch>C:\1.txt?C:\2.txt"。"Batch"为附加选项名称，使用"?"分割多个文件位置。

4.当您所添加的附加选项的值为真时，您可以简化表达方式。例如："KeepAlive>True"现在可以简写为"KeepAlive"。

5.增加了因任务启动错误和重试次数达到上限的错误提示音。

---

**5.3.0 (2020/03/26)**

1.您是否经历过下载过程中m3u8链接失效导致任务失败的问题？现在，您可以在任务过程中手动更新失效的m3u8链接，而不丢失任务进度。

使用此功能需要您的任务处于暂停状态，并实时应用附加选项":>NewURL"。其中NewURL为新的m3u8链接。

2.您是否在批量下载任务时需要自动过滤一些固定位置的视频切片？根据用户要求，现在，您可以通过指定这些切片的位置实现自动跳过。

使用此功能需要您添加附加选项"Skip>1-10,29,40"，表示前十个切片、第二十九个切片及第四十个切片将被自动忽略。

3.现在，您可以通过双击错误指示灯，快速打开该任务的日志文件。

4.现在，您可以通过隐藏操作关闭程序启动时的兼容性自检。

5.我们优化了一些代码结构，使程序实现更好的工作逻辑。

---

**5.2.4 (2020/03/16)**

1.不再无视获取大小为空(0字节)的切片文件，将以错误切片进行再次下载的处理。

如果您仍然希望无视空文件，或您不希望下载器对每个切片文件的大小进行比对验证，请使用附加选项"IgnoreSize>True"。本项更新及其附加选项均与2-Pass校验模块完全无关，不影响2-Pass校验的工作逻辑。

2.可以设置独立的HTTP代理服务器，覆盖IE代理设置。

设置独立HTTP代理请使用附加选项"Proxy>12.34.56.7:8080"。其中12.34.56.7:8080为您指定的代理服务器地址。

3.调整默认重试次数上限为100次。

4.部分代码优化。

---

**5.2.2 (2020/03/11)**

1.修复叠加的大师列表无法被正确分析的问题。

---

**5.2.0 (2020/03/07)**

1.增加了一项隐藏功能。

2.修复在一些情况下优酷视频名称无法被正确解析的问题。

3.少量代码优化。

---

**5.1.9 (2020/03/06)**

1.下载芒果TV视频网站的m3u8链接时，将自动添加所需的HTTP请求头。手动指定相关请求头可覆盖默认设置。

2.少量代码优化。

---

**5.1.7 (2020/02/24)**

1.修复从注册表加载默认附加选项参数时，2-Pass校验和封装格式无法被正确录入的问题。

2.使用DeYK插件时将自动忽略m3u8列表中的KEY(密钥)标记，不采用HLS通用标准中的"AES-128"方式解密。

---

**5.1.6 (2020/02/13)**

1.在未开始任务的情况下，单击"附加选项"按钮可将已填写的附加选项内容保存为默认参数，在每次启动新任务时自动加载。

2.在未手动填写任务名的情况下，自动填写优酷视频m3u8的视频名作为任务名。

附加选项"IgnoreYouku"拥有最高优先级。所有针对优酷视频网站有关的优化项在启用该选项后全部不执行。

---

**5.1.5 (2020/02/13)**

1.修复上一版本软件中DeYK插件无法正确工作的问题。

2.增加了一项隐藏功能。

---

**5.1.4 (2020/02/13)**

1.适配Base64格式的优酷copyrightDRM密钥，并修复HEX格式密钥中有空格导致无法解密的问题。

2.搜狐视频域名匹配格式调整。如不需要下载器分析搜狐视频可在附加选项中添加"IgnoreSohu>True"。

---

**5.1.3 (2020/02/13)**

1.新增搜狐视频m3u8解扰内置插件，可实现解密大部分加密的搜狐视频m3u8列表。

针对搜狐视频加密的m3u8列表，在此前的很萌下载器版本中，采用尝试获取不加密的m3u8的方式进行下载，而非将密文解密。近期，部分用户反映极少部分的搜狐视频无法正常获取不加密的m3u8，因此自此版本起加入实际解扰模块。

2.优化剪贴板监听，在已填写任务链接但不自动启动任务的情况下，不会继续监听剪贴板。

---

**5.1.2 (2020/02/12)**

1.修复了可能导致暂停功能和任务自动恢复功能工作不正常的一个相关问题。

---

**5.1.1 (2020/02/11)**

感谢您选择 HmDX 很萌下载器。本次更新我们为您带来了数项激动人心的新功能：

1.很萌下载器自5.0版本起，更换下载引擎为基于.NET核心的自主研发的多线程下载控制器，可在确保下载质量的前提下实现多线程高速下载，从而更有效地利用您的计算机和网络资源。

默认线程数为10线程，可通过附加选项"Threads>XX"修改线程数，XX的取值范围是1-1000。

2.新增支持下载速度显示，可在任务进行时估算实时的下载速度。实际速度以Windows任务管理器显示为准。

3.应广大用户要求，我们增加了自定义皮肤功能。现在，您可以选择使用自己的一张PNG或JPEG格式的图片作为背景，并指定界面文字的RGB配色。同时，我们增加了一套默认皮肤“星空的记忆”。

4.增加HTTP自定义协议头支持。您可以使用"Header>XX"附加选项来设置自定义HTTP协议头。

例如：协议头"Test: Content"可以通过"Header>Test: Content"选项添加。可无限次使用"Header"参数追加更多的自定义协议头。

除此之外，我们一如既往地对下载器进行了数项优化：

5.我们针对UI界面做了一些细节优化，以实现更加舒适的显示效果。

6.修改了部分日志呈现的格式，以适配全新的多线程下载引擎。

7.移除了内置的aria2第三方下载软件。移除了不常用的“制动”选项。

8.移除了一些不需要的代码，使程序运行更加流畅。

9.将一些针对特定视频网站的代码和函数移植为了内置插件形式。

同时，我们修复了一些常规错误：

10.修复了EXT-X-MAP标签的出现会导致解析m3u8列表出错的问题。

11.修复了在一些情况下，超时列表加载不正确的问题。

祝您使用愉快。

---

**4.1.0 (2020/02/05)**

1.新增内置插件功能模块。

2.很萌下载器率先发布优酷视频copyrightDRM(自研DRM)解扰插件 - DeYK很萌下载器插件版。该插件版功能及效果与DeYK独立版完全一致。

请通过附加选项"DeYK>KEY"手动指定copyrightDRM密钥。例如附加选项中填写："DeYK>4D73E410391EB95C73445AA4ABE012C4"。不指定密钥将无法解密视频。

3.自动过滤优酷视频m3u8中的广告分片，不进行下载。

---

**4.0.7 (2019/12/29)**

1.任务自动启动时，若启动失败，由直接提示失败调整为自动重试一定次数。

2.优化批量面板中的帮助气泡显示效果。

3.优化部分代码逻辑。

4.增加了一些社会主义宣传标语。

---

**4.0.6 (2019/12/04)**

1.批量面板添加任务或应用参数后，在无序号标记的情况下界面中不保留任务名。

2.支持m3u8列表文件直接拖拽至程序exe图标。

3.增加了一批社会主义宣传标语。

---

**4.0.4 (2019/11/21)**

1.增加了后予执行自定义程序的附加选项，可在任务完成后自动执行程序或脚本。如开启自动退出(AutoExit)，下载器将等待自定义程序执行完毕。

附加选项示例用法："PostExecution>D:\MyScript.bat"。

---

**4.0.3 (2019/11/19)**

1.修复了在一些特殊情况下，录制直播视频会导致相同切片被判定为不同切片的问题。

2.移除了过时的优酷DRM视频自动解密策略。

---

**4.0.2 (2019/10/14)**

1.修复任务名包含某些特殊字符时，可能导致输出文件异常的问题。

---

**4.0.1 (2019/10/12)**

1.修复任务开始后，仍然可以通过目录历史记录更改目录，导致任务出错的问题。

2.修复手动指定父URL时，无法智能识别父URL中有效数据的问题。

---

**4.0.0 (2019/10/12)**

1.焕然一新的状态指示区域。

2.批量任务面板支持批量下载m3u8列表，而不下载视频内容。在单任务界面中也可以使用附加选项"NoStream>True"实现仅下载m3u8列表。

3.更新项目框架至 Microsoft .NET Framework 4.5.2 版本。

4.更新 aria2c 多线程下载组件至 1.3.5 版本。

5.在单任务界面导入本地m3u8后，如未填写任务名，将默认采用文件名作为任务名。

6.更新随机名称生成策略，进一步防止随机文件名冲突。

---

**3.6.2 (2019/09/15)**

1.修复部分芒果视频m3u8在手动指定有效的User-Agent后，无法生效的问题。

2.附加选项将Cookie参数修正为标准写法"Cookie"。(历史版本为"Cookies"，自此版本已经弃用。)

---

**3.6.1 (2019/09/01)**

1.调整HTTP 302跳转检测策略，在获取m3u8时强制启用HTTP 302跳转检测，以解决Bestv等视频网站无法下载的问题。

2.修复附加参数中指定父URL，但在一些情况下不会生效的问题。

3.批量面板支持自动加载注册表中写入的固定附加选项。

4.修复在直播录制下，任务名被日志记录多次的问题。

5.修改了一些词条。

---

**3.6.0 (2019/08/18)**

1.添加工作目录历史记录功能，可记录近期使用的5个工作目录。本功能只在主界面生效，对于批量任务的使用情况，可在主界面选择好工作目录后再提升为批量任务控制器。

2.优化系统内存(RAM)使用策略。

3.增加使用aria2多线程功能的强制警告。
